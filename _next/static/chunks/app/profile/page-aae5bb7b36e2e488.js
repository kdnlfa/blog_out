(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{603:(e,s,a)=>{Promise.resolve().then(a.bind(a,8591))},1202:(e,s,a)=>{"use strict";a.d(s,{BT:()=>o,N:()=>p,Tn:()=>u,Wu:()=>m,ZB:()=>x,Zj:()=>j,Zp:()=>i,aR:()=>c,vZ:()=>g,wL:()=>h});var r=a(5155),l=a(2115),t=a(2085),d=a(3999);let n=(0,t.F)("rounded-lg bg-white transition-all duration-200",{variants:{shadow:{none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg",xl:"shadow-xl"},padding:{none:"",sm:"p-3",md:"p-4",lg:"p-6",xl:"p-8"},border:{true:"border border-gray-200",false:""},hover:{true:"hover:shadow-lg hover:scale-[1.02] cursor-pointer",false:""}},defaultVariants:{shadow:"md",padding:"md",border:!1,hover:!1}}),i=(0,l.forwardRef)((e,s)=>{let{className:a,shadow:l,padding:t,border:i,hover:c,children:x,...o}=e;return(0,r.jsx)("div",{ref:s,className:(0,d.cn)(n({shadow:l,padding:t,border:i,hover:c}),a),...o,children:x})});i.displayName="Card";let c=(0,l.forwardRef)((e,s)=>{let{className:a,children:l,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,d.cn)("mb-4",a),...t,children:l})});c.displayName="CardHeader";let x=(0,l.forwardRef)((e,s)=>{let{className:a,children:l,as:t="h3",...n}=e;return(0,r.jsx)(t,{ref:s,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight text-gray-900",a),...n,children:l})});x.displayName="CardTitle";let o=(0,l.forwardRef)((e,s)=>{let{className:a,children:l,...t}=e;return(0,r.jsx)("p",{ref:s,className:(0,d.cn)("text-sm text-gray-600 mt-1",a),...t,children:l})});o.displayName="CardDescription";let m=(0,l.forwardRef)((e,s)=>{let{className:a,children:l,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,d.cn)("",a),...t,children:l})});m.displayName="CardContent";let h=(0,l.forwardRef)((e,s)=>{let{className:a,children:l,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,d.cn)("mt-4 pt-4 border-t border-gray-100",a),...t,children:l})});h.displayName="CardFooter";let u=(0,l.forwardRef)((e,s)=>(0,r.jsx)(i,{ref:s,shadow:"sm",border:!0,...e})),p=(0,l.forwardRef)((e,s)=>(0,r.jsx)(i,{ref:s,shadow:"lg",...e})),g=(0,l.forwardRef)((e,s)=>(0,r.jsx)(i,{ref:s,hover:!0,...e})),j=(0,l.forwardRef)((e,s)=>{let{title:a,excerpt:l,author:t,date:n,category:u,tags:p=[],imageUrl:g,href:j,onRead:f,className:v,...b}=e;return(0,r.jsxs)(i,{ref:s,hover:!!(f||j),className:(0,d.cn)("overflow-hidden",v),onClick:()=>{f?f():j&&window.open(j,"_self")},...b,children:[g&&(0,r.jsx)("div",{className:"aspect-video relative overflow-hidden",children:(0,r.jsx)("img",{src:g,alt:a,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:(0,d.cn)(g?"p-4":""),children:[(0,r.jsxs)(c,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:u}),(0,r.jsx)("span",{className:"text-gray-500 text-xs",children:n})]}),(0,r.jsx)(x,{children:a}),(0,r.jsx)(o,{children:l})]}),(0,r.jsx)(m,{children:p.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[p.slice(0,3).map((e,s)=>(0,r.jsxs)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:["#",e]},s)),p.length>3&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["+",p.length-3]})]})}),(0,r.jsx)(h,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["作者: ",t]}),(0,r.jsx)("span",{className:"text-blue-600 text-sm font-medium",children:"阅读更多 →"})]})})]})]})});j.displayName="BlogCard"},6076:(e,s,a)=>{"use strict";a.d(s,{DO:()=>p,TM:()=>m,j5:()=>h,pd:()=>o,yA:()=>u});var r=a(5155),l=a(2115),t=a(2085),d=a(3999);let n=(0,t.F)("flex w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",{variants:{size:{sm:"h-8 px-2 text-xs",md:"h-10 px-3 text-sm",lg:"h-11 px-4 text-base"},variant:{default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-500 focus:border-red-500 focus:ring-red-500",success:"border-green-500 focus:border-green-500 focus:ring-green-500"}},defaultVariants:{size:"md",variant:"default"}}),i=(0,l.forwardRef)((e,s)=>{let{className:a,required:l,children:t,...n}=e;return(0,r.jsxs)("label",{ref:s,className:(0,d.cn)("block text-sm font-medium text-gray-700 mb-1",a),...n,children:[t,l&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]})});i.displayName="Label";let c=e=>{let{message:s}=e;return s?(0,r.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s]}):null},x=e=>{let{text:s}=e;return s?(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:s}):null},o=(0,l.forwardRef)((e,s)=>{let{className:a,type:t="text",size:o,variant:m,label:h,error:u,helperText:p,required:g,leftIcon:j,rightIcon:f,id:v,...b}=e,N=v||l.useId();return(0,r.jsxs)("div",{className:"w-full",children:[h&&(0,r.jsx)(i,{htmlFor:N,required:g,children:h}),(0,r.jsxs)("div",{className:"relative",children:[j&&(0,r.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:j}),(0,r.jsx)("input",{id:N,type:t,ref:s,className:(0,d.cn)(n({size:o,variant:u?"error":m}),j&&"pl-10",f&&"pr-10",a),...b}),f&&(0,r.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:f})]}),(0,r.jsx)(c,{message:u}),!u&&(0,r.jsx)(x,{text:p})]})});o.displayName="Input";let m=(0,l.forwardRef)((e,s)=>{let{className:a,label:t,error:n,helperText:o,required:m,id:h,rows:u=4,...p}=e,g=h||l.useId();return(0,r.jsxs)("div",{className:"w-full",children:[t&&(0,r.jsx)(i,{htmlFor:g,required:m,children:t}),(0,r.jsx)("textarea",{id:g,ref:s,rows:u,className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",n&&"border-red-500 focus:border-red-500 focus:ring-red-500",a),...p}),(0,r.jsx)(c,{message:n}),!n&&(0,r.jsx)(x,{text:o})]})});m.displayName="Textarea";let h=(0,l.forwardRef)((e,s)=>(0,r.jsx)(o,{ref:s,type:"email",...e})),u=(0,l.forwardRef)((e,s)=>{let{showPassword:a=!1,onTogglePassword:l,...t}=e,d=(0,r.jsx)("button",{type:"button",onClick:l,className:"text-gray-400 hover:text-gray-600 focus:outline-none",tabIndex:-1,children:a?(0,r.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),(0,r.jsx)("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})]}):(0,r.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})});return(0,r.jsx)(o,{ref:s,type:a?"text":"password",rightIcon:l?d:void 0,...t})}),p=(0,l.forwardRef)((e,s)=>(0,r.jsx)(o,{ref:s,type:"search",leftIcon:(0,r.jsx)("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})}),...e}))},8591:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>p});var r=a(5155),l=a(2115),t=a(3343),d=a(1202),n=a(4912),i=a(6076),c=a(5340),x=a(8145),o=a(3274),m=a(1056),h=a(1778),u=a(9843);function p(){let{user:e,updateProfile:s,changePassword:a,isLoading:p}=(0,o.Nu)(),[g,j]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1),[b,N]=(0,l.useState)({displayName:(null==e?void 0:e.displayName)||"",bio:(null==e?void 0:e.bio)||"",avatar:(null==e?void 0:e.avatar)||""}),[w,y]=(0,l.useState)({oldPassword:"",newPassword:"",confirmPassword:""}),[P,R]=(0,l.useState)({}),[C,k]=(0,l.useState)("");if(p||!e)return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(t.default,{}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("div",{className:"h-20 bg-gray-200 rounded-full w-20 mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]})]})})]});let z=async e=>{e.preventDefault(),R({}),k("");let a={},r=m.EJ.validateDisplayName(b.displayName);if(r&&(a.displayName=r),Object.keys(a).length>0)return void R(a);try{await s(b),k("个人信息更新成功！"),j(!1)}catch(e){R({general:"更新失败，请重试"})}},S=async e=>{e.preventDefault(),R({}),k("");let s={};w.oldPassword||(s.oldPassword="请输入当前密码");let r=m.EJ.validatePassword(w.newPassword);if(r&&(s.newPassword=r),w.newPassword!==w.confirmPassword&&(s.confirmPassword="两次输入的密码不一致"),Object.keys(s).length>0)return void R(s);try{await a(w.oldPassword,w.newPassword),k("密码修改成功！"),y({oldPassword:"",newPassword:"",confirmPassword:""}),v(!1)}catch(e){R({password:"密码修改失败，请重试"})}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(t.default,{}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"个人资料"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"管理您的账户信息和偏好设置"})]}),C&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-md",children:(0,r.jsx)("p",{className:"text-green-600",children:C})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsx)(d.ZB,{children:"基本信息"}),(0,r.jsx)(n.$n,{variant:g?"outline":"default",size:"sm",onClick:()=>{j(!g),g||N({displayName:e.displayName,bio:e.bio||"",avatar:e.avatar||""})},children:g?"取消":"编辑"})]}),(0,r.jsxs)(d.Wu,{children:[P.general&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsx)("p",{className:"text-red-600 text-sm",children:P.general})}),g?(0,r.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(c.e,{src:b.avatar,alt:b.displayName,size:"lg"}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(i.pd,{label:"头像URL",value:b.avatar,onChange:e=>N(s=>({...s,avatar:e.target.value})),placeholder:"输入头像图片链接"})})]}),(0,r.jsx)(i.pd,{label:"显示名称",value:b.displayName,onChange:e=>N(s=>({...s,displayName:e.target.value})),error:P.displayName,required:!0}),(0,r.jsx)(i.TM,{label:"个人简介",value:b.bio,onChange:e=>N(s=>({...s,bio:e.target.value})),placeholder:"介绍一下自己...",rows:4}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(n.$n,{type:"submit",loading:p,children:"保存更改"}),(0,r.jsx)(n.$n,{type:"button",variant:"outline",onClick:()=>j(!1),children:"取消"})]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(c.e,{src:e.avatar||"",alt:e.displayName,size:"lg"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.displayName}),(0,r.jsxs)("p",{className:"text-gray-600",children:["@",e.username]}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)(x.E,{className:(e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"editor":return"bg-blue-100 text-blue-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.role),children:(e=>{switch(e){case"admin":return"管理员";case"editor":return"编辑者";case"user":return"普通用户";default:return"未知"}})(e.role)})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"邮箱地址"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:e.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"注册时间"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(0,h.m)(new Date(e.createdAt),{addSuffix:!0,locale:u.g})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"最后登录"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(0,h.m)(new Date(e.lastLoginAt),{addSuffix:!0,locale:u.g})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"邮箱验证"}),(0,r.jsx)("p",{className:"mt-1 text-sm",children:e.isEmailVerified?(0,r.jsx)("span",{className:"text-green-600",children:"已验证"}):(0,r.jsx)("span",{className:"text-red-600",children:"未验证"})})]})]}),e.bio&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"个人简介"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:e.bio})]})]})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsx)(d.ZB,{children:"安全设置"}),(0,r.jsx)(n.$n,{variant:"outline",size:"sm",onClick:()=>v(!f),children:f?"取消":"修改密码"})]}),(0,r.jsx)(d.Wu,{children:f?(0,r.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[P.password&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsx)("p",{className:"text-red-600 text-sm",children:P.password})}),(0,r.jsx)(i.pd,{type:"password",label:"当前密码",value:w.oldPassword,onChange:e=>y(s=>({...s,oldPassword:e.target.value})),error:P.oldPassword,required:!0}),(0,r.jsx)(i.pd,{type:"password",label:"新密码",value:w.newPassword,onChange:e=>y(s=>({...s,newPassword:e.target.value})),error:P.newPassword,required:!0}),(0,r.jsx)(i.pd,{type:"password",label:"确认新密码",value:w.confirmPassword,onChange:e=>y(s=>({...s,confirmPassword:e.target.value})),error:P.confirmPassword,required:!0}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(n.$n,{type:"submit",loading:p,children:"更新密码"}),(0,r.jsx)(n.$n,{type:"button",variant:"outline",onClick:()=>{v(!1),y({oldPassword:"",newPassword:"",confirmPassword:""})},children:"取消"})]})]}):(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-gray-600",children:"定期更换密码可以提高账户安全性。建议使用包含字母、数字和特殊字符的强密码。"})})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"账户统计"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"发布文章"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"0"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"获得点赞"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:"0"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"收到评论"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:"0"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"关注者"})]})]})})]})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[490,460,7,343,441,684,358],()=>s(603)),_N_E=e.O()}]);