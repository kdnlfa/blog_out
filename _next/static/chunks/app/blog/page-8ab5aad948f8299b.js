(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{2868:(e,t,s)=>{"use strict";s.d(t,{$Q:()=>l,Iw:()=>o,cI:()=>n});let a=s(9509).env.NEXT_PUBLIC_API_URL||"https://xzatkvsdyvij.sealosbja.site",r={articles:"".concat(a,"/api/articles"),categories:"".concat(a,"/api/articles/categories"),tags:"".concat(a,"/api/articles/tags"),articleById:e=>"".concat(a,"/api/articles/").concat(e),articleBySlug:e=>"".concat(a,"/api/articles/slug/").concat(e),articlesByAuthor:e=>"".concat(a,"/api/articles/author/").concat(e),likeArticle:e=>"".concat(a,"/api/articles/").concat(e,"/like")};class l extends Error{constructor(e,t,s){super(t),this.code=e,this.field=s,this.name="ArticleApiError"}}class c{getAuthHeaders(){let e=localStorage.getItem("blog_auth_token");return{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)}}}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let c=await fetch(e,{...t,headers:{...this.getAuthHeaders(),...t.headers}}),i=await c.json();if(!i.success){var s,a,r;throw new l((null==(s=i.error)?void 0:s.code)||"API_ERROR",(null==(a=i.error)?void 0:a.message)||i.message||"请求失败",null==(r=i.error)?void 0:r.field)}return i.data}catch(e){if(e instanceof l)throw e;throw new l("NETWORK_ERROR","网络连接失败，请检查后端服务是否启动")}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let i=new c,n={async getArticles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[s,a]=e;null!=a&&(Array.isArray(a)?t.append(s,a.join(",")):t.append(s,String(a)))});let s=t.toString()?"".concat(r.articles,"?").concat(t):r.articles;return i.get(s)},getArticleById:async e=>i.get(r.articleById(e)),getArticleBySlug:async e=>i.get(r.articleBySlug(e)),createArticle:async e=>i.post(r.articles,e),updateArticle:async(e,t)=>i.put(r.articleById(e),t),deleteArticle:async e=>i.delete(r.articleById(e)),getCategories:async()=>i.get(r.categories),getTags:async()=>i.get(r.tags),async getArticlesByAuthor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=new URLSearchParams;Object.entries(t).forEach(e=>{let[t,a]=e;null!=a&&(Array.isArray(a)?s.append(t,a.join(",")):s.append(t,String(a)))});let a=s.toString()?"".concat(r.articlesByAuthor(e),"?").concat(s):r.articlesByAuthor(e);return i.get(a)},likeArticle:async e=>i.post(r.likeArticle(e))},o={parseTags(e){try{return JSON.parse(e)}catch(e){return[]}},formatDate:e=>new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}),generateExcerpt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,s=e.replace(/#{1,6}\s/g,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/\[([^\]]*)\]\([^)]*\)/g,"$1").replace(/!\[([^\]]*)\]\([^)]*\)/g,"").replace(/\n+/g," ").trim();return s.length>t?s.substring(0,t)+"...":s},calculateReadTime(e){let t=Math.ceil(e.length/200);return"".concat(t,"分钟")}}},5e3:(e,t,s)=>{Promise.resolve().then(s.bind(s,5406))},5406:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(5155),r=s(2115),l=s(3343),c=s(8145),i=s(4912),n=s(9065),o=s(2868),d=s(6874),m=s.n(d);let h={title:"分享技术，记录成长",subtitle:"专注前端开发、技术分享和个人成长，记录我在编程路上的点点滴滴",author:{name:"前端开发工程师",description:"专注于现代前端技术栈，热爱分享和学习新技术",avatar:"我"}},g=["primary","secondary","success","warning","danger"],x=(0,n.QU)().map((e,t)=>({...e,color:g[t%5]}));function u(){let[e,t]=(0,r.useState)(n.iJ),[s,d]=(0,r.useState)(x),[u,p]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{let e=[...(await o.cI.getArticles({isPublished:!0,sortBy:"publishDate",sortOrder:"desc",pageSize:20})).articles.map(e=>{var t;return{...e,tags:Array.isArray(e.tags)?e.tags:o.Iw.parseTags(e.tags||"[]"),author:"string"==typeof e.author?e.author:(null==(t=e.author)?void 0:t.displayName)||"未知作者",publishDate:e.publishDate?o.Iw.formatDate(e.publishDate):e.publishDate,views:e.viewCount||0,imageUrl:e.imageUrl||"https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=800&h=400&fit=crop"}}),...n.iJ];t(e);try{let e=[...(await o.cI.getCategories()).map((e,t)=>({...e,color:g[t%5]})),...x];d(e)}catch(e){console.log("分类API获取失败，使用静态分类")}}catch(e){console.log("文章API获取失败，使用静态数据")}finally{p(!1)}})()},[]),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(l.default,{}),(0,a.jsx)("section",{className:"bg-white",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 sm:text-5xl md:text-6xl",children:h.title}),(0,a.jsx)("p",{className:"mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl",children:h.subtitle}),(0,a.jsxs)("div",{className:"mt-5 max-w-md mx-auto sm:flex sm:justify-center md:mt-8",children:[(0,a.jsx)(i.$n,{size:"lg",children:"开始阅读"}),(0,a.jsx)(i.$n,{variant:"outline",size:"lg",className:"mt-3 sm:mt-0 sm:ml-3",children:"订阅更新"})]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[(0,a.jsxs)("main",{className:"lg:col-span-8",children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"最新文章"}),(0,a.jsx)("p",{className:"text-gray-600",children:"分享最新的技术见解和学习心得"})]}),u&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 inline-block mr-2"}),"加载中..."]})]}),(0,a.jsx)("div",{className:"space-y-8",children:e.map((e,t)=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"md:flex",children:[(0,a.jsx)("div",{className:"md:w-1/3",children:(0,a.jsx)("img",{src:e.imageUrl||"https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=800&h=400&fit=crop",alt:e.title,className:"h-48 w-full object-cover md:h-full"})}),(0,a.jsxs)("div",{className:"p-6 md:w-2/3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(c.E,{variant:"primary",children:e.category}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:e.publishDate}),(0,a.jsxs)("span",{className:"text-gray-500 text-sm",children:["• ",e.readTime||o.Iw.calculateReadTime(e.content),"阅读"]})]}),(0,a.jsx)(m(),{href:"/blog/".concat(e.slug),children:(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2 text-gray-900 hover:text-blue-600 transition-colors cursor-pointer",children:e.title})}),(0,a.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e.excerpt||o.Iw.generateExcerpt(e.content)}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(e.tags||[]).slice(0,3).map(e=>(0,a.jsxs)(c.E,{variant:"outline",size:"sm",children:["#",e]},e)),(e.tags||[]).length>3&&(0,a.jsxs)(c.E,{variant:"outline",size:"sm",children:["+",(e.tags||[]).length-3]})]}),(0,a.jsx)(m(),{href:"/blog/".concat(e.slug),children:(0,a.jsx)(i.$n,{variant:"ghost",size:"sm",children:"阅读更多 →"})})]})]})]})},e.id||e.slug||t))}),(0,a.jsx)("div",{className:"text-center mt-12",children:(0,a.jsx)(i.$n,{variant:"outline",size:"lg",children:"查看更多文章"})})]}),(0,a.jsxs)("aside",{className:"lg:col-span-4 mt-12 lg:mt-0",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"文章分类"}),(0,a.jsx)("div",{className:"space-y-2",children:s.slice(0,8).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(c.E,{variant:e.color,size:"sm",children:e.name})}),(0,a.jsxs)("span",{className:"text-gray-500 text-sm",children:[e.count," 篇"]})]},e.name||t))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"关于博主"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"h-20 w-20 bg-blue-600 rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-4",children:h.author.avatar}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:h.author.name}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:h.author.description}),(0,a.jsx)(i.$n,{variant:"outline",size:"sm",fullWidth:!0,children:"了解更多"})]})]})]})]})})]})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},e=>{var t=t=>e(e.s=t);e.O(0,[490,7,343,441,684,358],()=>t(5e3)),_N_E=e.O()}]);