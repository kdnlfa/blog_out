"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[343],{2883:(e,n,t)=>{t.d(n,{G:()=>c});var s=t(5155),r=t(2115),a=t(5695),o=t(8145),i=t(9065);function c(e){let{placeholder:n="搜索文章...",size:t="md",className:c="",autoFocus:l=!1,initialQuery:u=""}=e,[d,m]=(0,r.useState)(u),[p,x]=(0,r.useState)(!1),[h,f]=(0,r.useState)([]),[g]=(0,r.useState)((0,i.R9)()),y=(0,a.useRouter)(),v=(0,r.useRef)(null),b=(0,r.useRef)(null);(0,r.useEffect)(()=>{function e(e){b.current&&!b.current.contains(e.target)&&x(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;if(e.trim()){var n;y.push("/search?q=".concat(encodeURIComponent(e.trim()))),x(!1),null==(n=v.current)||n.blur()}},k=e=>{m(e),j(e)},N=d.trim().length>0?h:[],C=0===d.trim().length&&p;return(0,s.jsxs)("div",{ref:b,className:"relative ".concat(c),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{ref:v,type:"text",value:d,onChange:e=>{let n=e.target.value;m(n),n.trim()?f((0,i.yY)(n)):f([]),x(!0)},onKeyDown:e=>{if("Enter"===e.key)e.preventDefault(),j();else if("Escape"===e.key){var n;x(!1),null==(n=v.current)||n.blur()}},onFocus:()=>{x(!0)},placeholder:n,autoFocus:l,className:"\n            w-full ".concat((()=>{switch(t){case"sm":return"h-8 text-sm px-3";case"lg":return"h-12 text-lg px-4";default:return"h-10 text-base px-3"}})(),"\n            pl-10 pr-4\n            border border-gray-300 rounded-lg\n            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\n            transition-all duration-200\n            bg-white\n          ")}),(0,s.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),d&&(0,s.jsx)("button",{onClick:()=>{var e;m(""),f([]),null==(e=v.current)||e.focus()},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p&&(N.length>0||C)&&(0,s.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-96 overflow-y-auto",children:[N.length>0&&(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 px-3 py-2 font-medium",children:"搜索建议"}),N.map((e,n)=>(0,s.jsxs)("button",{onClick:()=>k(e),className:"w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 transition-colors flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,s.jsx)("span",{className:"text-gray-900",children:e})]},n))]}),C&&(0,s.jsxs)("div",{className:"p-2 border-t border-gray-100",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 px-3 py-2 font-medium",children:"热门搜索"}),(0,s.jsx)("div",{className:"px-3 py-2 flex flex-wrap gap-2",children:g.slice(0,8).map(e=>(0,s.jsx)(o.E,{variant:"outline",className:"hover:bg-blue-50 cursor-pointer text-xs",onClick:()=>k(e),children:e},e))})]}),(0,s.jsx)("div",{className:"p-2 border-t border-gray-100",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,s.jsx)("button",{onClick:()=>y.push("/categories"),className:"text-left px-3 py-2 rounded-md hover:bg-gray-100 transition-colors text-sm text-gray-600",children:"\uD83D\uDCC2 浏览分类"}),(0,s.jsx)("button",{onClick:()=>y.push("/tags"),className:"text-left px-3 py-2 rounded-md hover:bg-gray-100 transition-colors text-sm text-gray-600",children:"\uD83C\uDFF7️ 查看标签"})]})})]})]})}},3343:(e,n,t)=>{t.d(n,{default:()=>d});var s=t(5155),r=t(2115),a=t(6874),o=t.n(a),i=t(4912),c=t(2883),l=t(5340),u=t(3274);function d(e){let{className:n}=e,[t,a]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),{user:p,isAuthenticated:x,logout:h,isLoading:f}=(0,u.As)(),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{function e(e){g.current&&!g.current.contains(e.target)&&m(!1)}if(d)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d]);let y=[{name:"首页",href:"/"},{name:"文章",href:"/blog"},{name:"分类",href:"/categories"},{name:"标签",href:"/tags"},{name:"关于",href:"/about"},{name:"联系",href:"/contact"},{name:"组件",href:"/components"}];return(0,s.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 ".concat(n),children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)(o(),{href:"/",className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold",children:"B"}),(0,s.jsx)("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"我的博客"})]})}),(0,s.jsx)("nav",{className:"hidden md:flex items-center space-x-8",children:y.map(e=>(0,s.jsx)(o(),{href:e.href,className:"text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium transition-colors",children:e.name},e.name))}),(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,s.jsx)(c.G,{placeholder:"搜索文章...",size:"sm",className:"w-64"}),f?(0,s.jsx)("div",{className:"h-8 w-8 animate-pulse bg-gray-200 rounded-full"}):x&&p?(0,s.jsxs)("div",{className:"relative",ref:g,children:[(0,s.jsxs)("button",{onClick:()=>m(!d),className:"flex items-center space-x-2 text-sm focus:outline-none",children:[(0,s.jsx)(l.e,{src:p.avatar||"",alt:p.displayName,size:"sm"}),(0,s.jsx)("span",{className:"hidden lg:block text-gray-700",children:p.displayName}),(0,s.jsx)("svg",{className:"h-4 w-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),d&&(0,s.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50",children:(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-700 border-b",children:[(0,s.jsx)("p",{className:"font-medium",children:p.displayName}),(0,s.jsx)("p",{className:"text-gray-500",children:p.email})]}),(0,s.jsx)(o(),{href:"/admin/create",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"写文章"}),(0,s.jsx)(o(),{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"个人资料"}),(0,s.jsx)(o(),{href:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"账户设置"}),(0,s.jsx)(o(),{href:"/admin",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"ADMIN"===p.role?"管理后台":"文章管理"}),(0,s.jsx)("div",{className:"border-t",children:(0,s.jsx)("button",{onClick:()=>{h(),m(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"退出登录"})})]})})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(o(),{href:"/auth/login",children:(0,s.jsx)(i.$n,{variant:"outline",size:"sm",children:"登录"})}),(0,s.jsx)(o(),{href:"/auth/register",children:(0,s.jsx)(i.$n,{size:"sm",children:"注册"})})]})]}),(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)(i.$n,{variant:"ghost",size:"sm",onClick:()=>a(!t),children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t?(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),t&&(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 border-t border-gray-200",children:[y.map(e=>(0,s.jsx)(o(),{href:e.href,className:"block px-3 py-2 text-base font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md",onClick:()=>a(!1),children:e.name},e.name)),(0,s.jsx)("div",{className:"px-3 py-2",children:(0,s.jsx)(c.G,{placeholder:"搜索文章...",size:"sm"})}),x&&p?(0,s.jsxs)("div",{className:"px-3 py-2 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,s.jsx)(l.e,{src:p.avatar||"",alt:p.displayName,size:"sm"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:p.displayName}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:p.email})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(o(),{href:"/admin/create",className:"block py-2 text-sm text-gray-600 hover:text-gray-900",children:"写文章"}),(0,s.jsx)(o(),{href:"/profile",className:"block py-2 text-sm text-gray-600 hover:text-gray-900",children:"个人资料"}),(0,s.jsx)(o(),{href:"/settings",className:"block py-2 text-sm text-gray-600 hover:text-gray-900",children:"账户设置"}),(0,s.jsx)(o(),{href:"/admin",className:"block py-2 text-sm text-gray-600 hover:text-gray-900",children:"ADMIN"===p.role?"管理后台":"文章管理"}),(0,s.jsx)("button",{onClick:()=>{h(),a(!1)},className:"block w-full text-left py-2 text-sm text-red-600 hover:text-red-800",children:"退出登录"})]})]}):(0,s.jsxs)("div",{className:"px-3 py-2 space-y-2",children:[(0,s.jsx)(o(),{href:"/auth/login",onClick:()=>a(!1),children:(0,s.jsx)(i.$n,{variant:"outline",size:"sm",fullWidth:!0,children:"登录"})}),(0,s.jsx)(o(),{href:"/auth/register",onClick:()=>a(!1),children:(0,s.jsx)(i.$n,{size:"sm",fullWidth:!0,children:"注册"})})]})]})})]})})}},5340:(e,n,t)=>{t.d(n,{e:()=>c});var s=t(5155),r=t(2115),a=t(2085),o=t(3999);let i=(0,a.F)("relative flex shrink-0 overflow-hidden rounded-full",{variants:{size:{sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12",xl:"h-16 w-16","2xl":"h-20 w-20"}},defaultVariants:{size:"md"}}),c=(0,r.forwardRef)((e,n)=>{let{className:t,size:r,src:a,alt:c,fallback:l,...u}=e,d=l||(null==c?void 0:c.slice(0,2).toUpperCase())||"?";return(0,s.jsx)("div",{ref:n,className:(0,o.cn)(i({size:r}),t),...u,children:a?(0,s.jsx)("img",{src:a,alt:c,className:"aspect-square h-full w-full object-cover"}):(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-gray-100 text-gray-600 font-medium",children:d})})});c.displayName="Avatar"},8145:(e,n,t)=>{t.d(n,{E:()=>c});var s=t(5155),r=t(2115),a=t(2085),o=t(3999);let i=(0,a.F)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{variants:{variant:{default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",secondary:"bg-purple-100 text-purple-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",outline:"border border-gray-300 text-gray-700"},size:{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}},defaultVariants:{variant:"default",size:"md"}}),c=(0,r.forwardRef)((e,n)=>{let{className:t,variant:r,size:a,children:c,...l}=e;return(0,s.jsx)("span",{ref:n,className:(0,o.cn)(i({variant:r,size:a}),t),...l,children:c})});c.displayName="Badge"},9065:(e,n,t)=>{t.d(n,{QU:()=>r,R9:()=>i,aL:()=>a,iJ:()=>s,yY:()=>o});let s=[{slug:"react-hooks-guide",title:"React Hooks 完全指南",content:"# React Hooks 完全指南\n\nReact Hooks 是 React 16.8 引入的新特性，它让你在不编写 class 的情况下使用 state 以及其他的 React 特性。\n\n> \uD83D\uDCA1 **提示**: Hooks 让函数组件拥有了类组件的能力，这是 React 发展史上的重要里程碑。\n\n## 什么是 Hooks？\n\nHooks 是一些可以让你在函数组件里\"钩入\" React state 及生命周期等特性的函数。它们的命名都以 `use` 开头。\n\n## 最常用的 Hooks 对比\n\n| Hook | 用途 | 返回值 | 使用场景 |\n|------|------|--------|----------|\n| `useState` | 状态管理 | `[state, setState]` | 组件需要内部状态 |\n| `useEffect` | 副作用处理 | `void` | 数据获取、订阅、DOM 操作 |\n| `useContext` | 消费 Context | `contextValue` | 跨组件数据共享 |\n| `useReducer` | 复杂状态管理 | `[state, dispatch]` | 复杂的状态逻辑 |\n\n### 1. useState\n\n`useState` 是最基本的 Hook，它让函数组件也能使用状态。\n\n```javascript\nimport React, { useState } from 'react';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>你点击了 {count} 次</p>\n      <button onClick={() => setCount(count + 1)}>\n        点击我\n      </button>\n    </div>\n  );\n}\n```\n\n**关键特性：**\n- 返回一个状态值和更新函数\n- 可以传入初始值或初始化函数\n- 状态更新是异步的\n\n### 2. useEffect\n\n`useEffect` 让你在函数组件中执行副作用操作。\n\n```typescript\nimport React, { useState, useEffect } from 'react';\n\nfunction Example() {\n  const [count, setCount] = useState(0);\n\n  // 类似 componentDidMount 和 componentDidUpdate\n  useEffect(() => {\n    document.title = `你点击了 ${count} 次`;\n  });\n\n  // 带清理的副作用\n  useEffect(() => {\n    const timer = setInterval(() => {\n      console.log('Timer tick');\n    }, 1000);\n\n    // 清理函数（类似 componentWillUnmount）\n    return () => clearInterval(timer);\n  }, []); // 空依赖数组，只在挂载时执行\n\n  return (\n    <div>\n      <p>你点击了 {count} 次</p>\n      <button onClick={() => setCount(count + 1)}>\n        点击我\n      </button>\n    </div>\n  );\n}\n```\n\n### 3. useContext\n\n`useContext` 让你可以订阅 React 的 Context，而不需要嵌套。\n\n```javascript\nconst ThemeContext = React.createContext();\n\nfunction Button() {\n  const theme = useContext(ThemeContext);\n  return (\n    <button style={{ background: theme.background }}>\n      我是一个按钮\n    </button>\n  );\n}\n```\n\n## 自定义 Hooks\n\n自定义 Hooks 是复用组件逻辑的强大方式：\n\n```typescript\n// 自定义计数器 Hook\nfunction useCounter(initialValue: number = 0) {\n  const [count, setCount] = useState(initialValue);\n  \n  const increment = useCallback(() => setCount(count + 1), [count]);\n  const decrement = useCallback(() => setCount(count - 1), [count]);\n  const reset = useCallback(() => setCount(initialValue), [initialValue]);\n  \n  return { count, increment, decrement, reset };\n}\n\n// 使用自定义 Hook\nfunction MyComponent() {\n  const { count, increment, decrement, reset } = useCounter(10);\n  \n  return (\n    <div>\n      <p>计数: {count}</p>\n      <button onClick={increment}>+</button>\n      <button onClick={decrement}>-</button>\n      <button onClick={reset}>重置</button>\n    </div>\n  );\n}\n```\n\n## Hooks 规则\n\n> ⚠️ **重要**: 以下规则必须严格遵守，否则可能导致难以调试的错误。\n\n1. **只在函数最顶层调用 Hook**\n   - ❌ 不要在循环、条件或嵌套函数中调用\n   - ✅ 确保每次渲染时 Hook 的调用顺序相同\n\n2. **只在 React 函数中调用 Hook**\n   - ✅ React 函数组件\n   - ✅ 自定义 Hook\n\n3. **使用 ESLint 插件来强制执行这些规则**\n\n```bash\nnpm install eslint-plugin-react-hooks --save-dev\n```\n\n## 性能优化相关 Hooks\n\n### useMemo 和 useCallback\n\n```javascript\nfunction ExpensiveComponent({ items, onClick }) {\n  // 缓存计算结果\n  const expensiveValue = useMemo(() => {\n    return items.reduce((sum, item) => sum + item.value, 0);\n  }, [items]);\n\n  // 缓存回调函数\n  const memoizedCallback = useCallback(() => {\n    onClick(expensiveValue);\n  }, [onClick, expensiveValue]);\n\n  return (\n    <div>\n      <p>总值: {expensiveValue}</p>\n      <button onClick={memoizedCallback}>点击</button>\n    </div>\n  );\n}\n```\n\n## 总结\n\nReact Hooks 提供了一种更直接的 API 来使用你已知的 React 概念：\n\n- **状态管理**: `useState`, `useReducer`\n- **副作用**: `useEffect`\n- **性能优化**: `useMemo`, `useCallback`\n- **上下文**: `useContext`\n- **引用**: `useRef`\n\n它们简化了组件逻辑，使代码更容易理解和测试，同时提供了强大的组合能力。\n\n---\n\n*希望这个指南对你学习 React Hooks 有所帮助！如果你有任何问题，欢迎在评论区讨论。*",excerpt:"深入了解 React Hooks 的使用方法和最佳实践，包括 useState、useEffect 等常用 Hooks。",author:"kdnlfa",publishDate:"2024-01-15",readTime:"8 分钟",category:"React",tags:["React","Hooks","前端开发"],views:1234,imageUrl:"https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=800&h=400&fit=crop"},{slug:"typescript-best-practices",title:"TypeScript 最佳实践",content:"\n# TypeScript 最佳实践\n\nTypeScript 是 JavaScript 的超集，为 JavaScript 添加了静态类型定义。\n\n## 为什么使用 TypeScript？\n\n1. **类型安全** - 在编译时捕获错误\n2. **更好的 IDE 支持** - 自动补全、重构等\n3. **更好的代码文档** - 类型即文档\n4. **团队协作** - 减少沟通成本\n\n## 基础类型\n\n```typescript\n// 基本类型\nlet isDone: boolean = false;\nlet decimal: number = 6;\nlet color: string = \"blue\";\n\n// 数组\nlet list: number[] = [1, 2, 3];\nlet list2: Array<number> = [1, 2, 3];\n\n// 元组\nlet x: [string, number] = [\"hello\", 10];\n```\n\n## 接口定义\n\n```typescript\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n  avatar?: string; // 可选属性\n  readonly createdAt: Date; // 只读属性\n}\n\nfunction createUser(user: Omit<User, 'id' | 'createdAt'>): User {\n  return {\n    id: Math.random(),\n    createdAt: new Date(),\n    ...user\n  };\n}\n```\n\n## 泛型\n\n```typescript\nfunction identity<T>(arg: T): T {\n  return arg;\n}\n\ninterface ApiResponse<T> {\n  data: T;\n  status: number;\n  message: string;\n}\n\nasync function fetchUser(): Promise<ApiResponse<User>> {\n  // 实现逻辑\n}\n```\n\n## 实用类型\n\nTypeScript 提供了许多实用的内置类型：\n\n```typescript\n// Pick - 选择指定属性\ntype UserPreview = Pick<User, 'name' | 'avatar'>;\n\n// Omit - 排除指定属性\ntype CreateUserData = Omit<User, 'id' | 'createdAt'>;\n\n// Partial - 所有属性变为可选\ntype UpdateUserData = Partial<User>;\n\n// Required - 所有属性变为必需\ntype CompleteUser = Required<User>;\n```\n\n## 最佳实践\n\n1. **严格模式配置**\n2. **明确的返回类型**\n3. **合理使用联合类型**\n4. **避免使用 any**\n5. **利用类型守卫**\n\nTypeScript 能显著提升代码质量和开发效率，值得每个前端开发者学习掌握。\n    ",excerpt:"TypeScript 开发的最佳实践，包括类型定义、接口设计和常用技巧。",author:"kdnlfa",publishDate:"2024-01-10",readTime:"12 分钟",category:"TypeScript",tags:["TypeScript","最佳实践","前端开发"],views:856,imageUrl:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=800&h=400&fit=crop"},{slug:"next-js-performance",title:"Next.js 性能优化指南",content:"\n# Next.js 性能优化指南\n\nNext.js 是一个功能强大的 React 框架，提供了许多内置的性能优化特性。\n\n## 图片优化\n\n使用 Next.js 的 Image 组件：\n\n```javascript\nimport Image from 'next/image'\n\nfunction MyComponent() {\n  return (\n    <Image\n      src=\"/my-image.jpg\"\n      alt=\"Description\"\n      width={500}\n      height={300}\n      priority // 对于首屏重要图片\n    />\n  )\n}\n```\n\n## 代码分割\n\n### 动态导入\n\n```javascript\nimport dynamic from 'next/dynamic'\n\nconst DynamicComponent = dynamic(() => import('../components/MyComponent'), {\n  loading: () => <p>Loading...</p>,\n})\n```\n\n### 路由级代码分割\n\nNext.js 自动为每个页面进行代码分割。\n\n## 预渲染优化\n\n### 静态生成 (SSG)\n\n```javascript\nexport async function getStaticProps() {\n  const data = await fetchData()\n  \n  return {\n    props: { data },\n    revalidate: 60 // ISR - 每60秒重新生成\n  }\n}\n```\n\n### 服务器端渲染 (SSR)\n\n```javascript\nexport async function getServerSideProps(context) {\n  const data = await fetchUserData(context.params.id)\n  \n  return {\n    props: { data }\n  }\n}\n```\n\n## 字体优化\n\n```javascript\nimport { Inter } from 'next/font/google'\n\nconst inter = Inter({ subsets: ['latin'] })\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <main className={inter.className}>\n      <Component {...pageProps} />\n    </main>\n  )\n}\n```\n\n## Bundle 分析\n\n```bash\nnpm install @next/bundle-analyzer\n```\n\n```javascript\n// next.config.js\nconst withBundleAnalyzer = require('@next/bundle-analyzer')({\n  enabled: process.env.ANALYZE === 'true',\n})\n\nmodule.exports = withBundleAnalyzer({\n  // 其他配置\n})\n```\n\n## 性能监控\n\n使用 Next.js 内置的性能指标：\n\n```javascript\nexport function reportWebVitals(metric) {\n  console.log(metric)\n}\n```\n\n通过这些优化技巧，可以显著提升 Next.js 应用的性能表现。\n    ",excerpt:"完整的 Next.js 性能优化指南，涵盖图片优化、代码分割、预渲染等关键技术。",author:"kdnlfa",publishDate:"2024-01-05",readTime:"15 分钟",category:"Next.js",tags:["Next.js","性能优化","React"],views:2103,imageUrl:"https://images.unsplash.com/photo-1541462608143-67571c6738dd?w=800&h=400&fit=crop"}];function r(){let e={};return s.forEach(n=>{e[n.category]=(e[n.category]||0)+1}),Object.entries(e).map(e=>{let[n,t]=e;return{name:n,count:t}})}function a(e){if(!e.trim())return[];let n=e.toLowerCase().trim(),t=[];return s.forEach(e=>{let s={title:e.title.toLowerCase().includes(n),content:e.content.toLowerCase().includes(n),excerpt:e.excerpt.toLowerCase().includes(n),tags:e.tags.some(e=>e.toLowerCase().includes(n)),category:e.category.toLowerCase().includes(n)},r=0;s.title&&(r+=10),s.excerpt&&(r+=8),s.category&&(r+=6),s.tags&&(r+=5),s.content&&(r+=3),e.title.toLowerCase()===n&&(r+=20),e.tags.some(e=>e.toLowerCase()===n)&&(r+=15),e.category.toLowerCase()===n&&(r+=12),r>0&&t.push({article:e,matches:s,relevanceScore:r})}),t.sort((e,n)=>n.relevanceScore-e.relevanceScore)}function o(e){if(!e.trim())return[];let n=e.toLowerCase().trim(),t=new Set;return s.forEach(e=>{e.title.toLowerCase().split(/\s+/).forEach(e=>{e.includes(n)&&e!==n&&t.add(e)})}),s.forEach(e=>{e.category.toLowerCase().includes(n)&&t.add(e.category)}),s.forEach(e=>{e.tags.forEach(e=>{e.toLowerCase().includes(n)&&t.add(e)})}),Array.from(t).slice(0,8)}function i(){let e=function(){let e={};return s.forEach(n=>{n.tags.forEach(n=>{e[n]=(e[n]||0)+1})}),Object.entries(e).map(e=>{let[n,t]=e;return{name:n,count:t}})}();return[...new Set([...r().map(e=>e.name),...e.sort((e,n)=>n.count-e.count).slice(0,5).map(e=>e.name)])].slice(0,10)}}}]);